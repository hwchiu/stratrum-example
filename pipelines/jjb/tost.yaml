- job-template:
      name: "{name}-onos"
      id: "deploy-onos"
      rancher_api: "Rancher_Dev_Terraform"
      git_server: "gerrit.opencord.org"
      git_user: "aether_jenkins"
      git_repo: "aether-pod-configs"
      gcp_credential: "gcp_bucket_terraform"
      project-type: pipeline
      dsl: !include-raw-escape: pipeline/Jenkinsfile.onos
      trigger_command: "deploy-onos"
      triggers:
        - gerrit-trigger:
           trigger_command: "{trigger_command}"
           pattern: "{terraform_dir}/tost/onos/.*"
      logrotate:
          daysToKeep: 7
          numToKeep: 10
          artifactDaysToKeep: 7
          artifactNumToKeep: 10
      parameters:
          - string:
                name: gcp_credential
                default: "{gcp_credential}"
          - string:
                name: rancher_cluster
                default: "{rancher_cluster}"
          - string:
                name: rancher_api_env
                default: "{rancher_api}"
          - string:
                name: git_repo
                default: "{git_repo}"
          - string:
                name: git_server
                default: "{git_server}"
          - string:
                name: git_user
                default: "{git_user}"
          - string:
                name: git_password_env
                default: "gerrit_password"
          - string:
                name: terraform_dir
                default: "{terraform_dir}"
          - string:
                name: onos_ns
                default: "tost"
          - string:
                name: onos_user
                default: "onos"
          - string:
                name: onos_password
                default: "onos_password"
          - string:
                name: config_review
          - string:
                name: config_patchset
          - string:
                name: k8s_config
                default: "{k8s_config}"

- job-template:
      name: "{name}-stratum"
      id: "deploy-stratum"
      rancher_api: "Rancher_Dev_Terraform"
      git_server: "gerrit.opencord.org"
      git_user: "aether_jenkins"
      git_repo: "aether-pod-configs"
      gcp_credential: "gcp_bucket_terraform"
      trigger_command: "deploy-stratum"
      triggers:
        - gerrit-trigger:
           trigger_command: "{trigger_command}"
           pattern: "{terraform_dir}/tost/stratum/.*"
      project-type: pipeline
      dsl: !include-raw-escape: pipeline/Jenkinsfile.stratum
      logrotate:
          daysToKeep: 7
          numToKeep: 10
          artifactDaysToKeep: 7
          artifactNumToKeep: 10
      parameters:
          - string:
                name: gcp_credential
                default: "{gcp_credential}"
          - string:
                name: rancher_cluster
                default: "{rancher_cluster}"
          - string:
                name: rancher_api_env
                default: "{rancher_api}"
          - string:
                name: git_repo
                default: "{git_repo}"
          - string:
                name: git_server
                default: "{git_server}"
          - string:
                name: git_user
                default: "{git_user}"
          - string:
                name: git_password_env
                default: "gerrit_password"
          - string:
                name: terraform_dir
                default: "{terraform_dir}"
          - string:
                name: stratum_ns
                default: "tost"
          - string:
                name: config_review
          - string:
                name: config_patchset
          - string:
                name: k8s_config
                default: "{k8s_config}"

- job-template:
      name: "{name}-telegraf"
      id: "deploy-telegraf"
      rancher_api: "Rancher_Dev_Terraform"
      git_server: "gerrit.opencord.org"
      git_user: "aether_jenkins"
      git_repo: "aether-pod-configs"
      gcp_credential: "gcp_bucket_terraform"
      trigger_command: "deploy-telegraf"
      triggers:
        - gerrit-trigger:
           trigger_command: "{trigger_command}"
           pattern: "{terraform_dir}/tost/telegraf/.*"
      project-type: pipeline
      dsl: !include-raw-escape: pipeline/Jenkinsfile.telegraf
      logrotate:
          daysToKeep: 7
          numToKeep: 10
          artifactDaysToKeep: 7
          artifactNumToKeep: 10
      parameters:
          - string:
                name: gcp_credential
                default: "{gcp_credential}"
          - string:
                name: rancher_cluster
                default: "{rancher_cluster}"
          - string:
                name: rancher_api_env
                default: "{rancher_api}"
          - string:
                name: git_repo
                default: "{git_repo}"
          - string:
                name: git_server
                default: "{git_server}"
          - string:
                name: git_user
                default: "{git_user}"
          - string:
                name: terraform_dir
                default: "{terraform_dir}"
          - string:
                name: telegraf_ns
                default: "tost"
          - string:
                name: config_review
          - string:
                name: config_patchset
          - string:
                name: k8s_config
                default: "{k8s_config}"

- job-template:
      name: "{name}"
      id: "deploy"
      need_onos: 'true'
      need_stratum: 'true'
      need_telegraf: 'true'
      git_server: "gerrit.opencord.org"
      git_user: "aether_jenkins"
      git_repo: "aether-pod-configs"
      rancher_api: "Rancher_Dev_Terraform"
      gcp_credential: "gcp_bucket_terraform"
      trigger_command: "deploy-tost"
      triggers:
        - gerrit-trigger:
           trigger_command: "{trigger_command}"
           pattern: "{terraform_dir}/tost.*"
      project-type: pipeline
      dsl: !include-raw-escape: pipeline/Jenkinsfile
      logrotate:
          daysToKeep: 7
          numToKeep: 10
          artifactDaysToKeep: 7
          artifactNumToKeep: 10
      parameters:
          - string:
                name: job_name
                default: "{name}"
          - string:
                name: gcp_credential
                default: "{gcp_credential}"
          - string:
                name: target_server
          - string:
                name: k8s_config
                default: "{k8s_config}"
          - string:
                name: rancher_api_env
                default: "{rancher_api}"
          - string:
                name: git_repo
                default: "{git_repo}"
          - string:
                name: git_server
                default: "{git_server}"
          - string:
                name: git_user
                default: "{git_user}"
          - string:
                name: rancher_cluster
                default: "{rancher_cluster}"
          - string:
                name: terraform_dir
                default: "{terraform_dir}"
          - string:
                name: config_review
          - string:
                name: config_patchset
          - string:
                name: need_onos
                default: "{need_onos}"
          - string:
                name: need_stratum
                default: "{need_stratum}"
          - string:
                name: need_telegraf
                default: "{need_telegraf}"


- job-template:
      name: "{name}-shared"
      id: "deploy-shared"
      registry_server: "registry.aetherproject.org"
      registry_user: "aether_jekins"
      target_namespace: "tost"
      project-type: pipeline
      dsl: !include-raw-escape: pipeline/Jenkinsfile.shared
      logrotate:
          daysToKeep: 7
          numToKeep: 10
          artifactDaysToKeep: 7
          artifactNumToKeep: 10
      parameters:
          - string:
                name: job_name
                default: "{name}"
          - string:
                name: registry_server
                default: "{registry_server}"
          - string:
                name: registry_user
                default: "{registry_user}"
          - string:
                name: registry_password_env
                default: "aether_registry_password"
          - string:
                name: target_namespace
                default: "{target_namespace}"
          - string:
                name: k8s_config
                default: "{k8s_config}"
